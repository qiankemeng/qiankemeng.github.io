# CMS æ•…éšœæ’æŸ¥æŒ‡å—

## é—®é¢˜ï¼šè®¿é—® /admin/ æ˜¾ç¤ºç©ºç™½é¡µé¢

### ğŸ” å¿«é€Ÿè¯Šæ–­

#### æ­¥éª¤ 1: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

1. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
3. åˆ·æ–°é¡µé¢ (`Ctrl+R` æˆ– `Cmd+R`)
4. æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯

**å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š**

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `Failed to load config.yml` | é…ç½®æ–‡ä»¶æœªæ‰¾åˆ°æˆ–æ ¼å¼é”™è¯¯ | æ£€æŸ¥ YAML è¯­æ³• |
| `Error loading the CMS configuration` | é…ç½®å‚æ•°é”™è¯¯ | ä½¿ç”¨ç®€åŒ–é…ç½®æµ‹è¯• |
| `Auth error` / `OAuth error` | æœªé…ç½®è®¤è¯æœåŠ¡ | é…ç½® Netlify æˆ–ä½¿ç”¨æœ¬åœ°æ¨¡å¼ |
| CDN åŠ è½½å¤±è´¥ | ç½‘ç»œé—®é¢˜ | æ£€æŸ¥ç½‘ç»œè¿æ¥ |

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨æµ‹è¯•æ¨¡å¼ï¼ˆæ¨èç”¨äºå¿«é€Ÿæµ‹è¯•ï¼‰

1. **ä¸´æ—¶æ›¿æ¢é…ç½®æ–‡ä»¶**ï¼š

   ```bash
   cd public/admin
   mv config.yml config.yml.backup
   mv config-simple.yml config.yml
   ```

2. **é‡æ–°è®¿é—®** `https://qiankemeng.github.io/admin/`

3. **æµ‹è¯•æ¨¡å¼ç‰¹ç‚¹**ï¼š
   - âœ… æ— éœ€ OAuth è®¤è¯
   - âœ… å¯ä»¥é¢„è§ˆ CMS ç•Œé¢
   - âœ… å¯ä»¥åˆ›å»ºå’Œç¼–è¾‘å†…å®¹ï¼ˆä»…æœ¬åœ°é¢„è§ˆï¼Œä¸ä¼šä¿å­˜åˆ° GitHubï¼‰
   - âš ï¸ æ›´æ”¹ä¸ä¼šçœŸæ­£æäº¤åˆ°ä»“åº“

### æ–¹æ¡ˆ Bï¼šé…ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒ

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°æµ‹è¯•å®Œæ•´åŠŸèƒ½ï¼š

1. **å¯åŠ¨æœ¬åœ°ä»£ç†æœåŠ¡**ï¼š

   ```bash
   npx decap-server
   ```

   ä¼šæ˜¾ç¤ºï¼š`Decap Server listening on port 8081`

2. **åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨å¼€å‘æœåŠ¡å™¨**ï¼š

   ```bash
   npm run dev
   ```

3. **ä¸´æ—¶ä½¿ç”¨æœ¬åœ°é…ç½®**ï¼š

   ```bash
   cd public/admin
   mv config.yml config.yml.backup
   mv config-local.yml config.yml
   ```

4. **è®¿é—®** `http://localhost:3000/admin/`

5. **ä¼˜ç‚¹**ï¼š
   - âœ… å®Œæ•´çš„ CMS åŠŸèƒ½
   - âœ… ç›´æ¥ç¼–è¾‘æœ¬åœ°æ–‡ä»¶
   - âœ… æ— éœ€ GitHub OAuth
   - âœ… å®æ—¶æŸ¥çœ‹æ›´æ”¹

### æ–¹æ¡ˆ Cï¼šé…ç½® Netlifyï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

è¿™æ˜¯å®Œæ•´çš„ç”Ÿäº§é…ç½®ï¼Œéœ€è¦ä¸€äº›è®¾ç½®ï¼š

#### 1. åˆ›å»º Netlify è´¦å·

1. è®¿é—® https://app.netlify.com/signup
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. æˆæƒ Netlify è®¿é—®ä½ çš„ä»“åº“

#### 2. å¯¼å…¥é¡¹ç›®

1. ç‚¹å‡» **Add new site** â†’ **Import an existing project**
2. é€‰æ‹© **GitHub**
3. æ‰¾åˆ°å¹¶é€‰æ‹© `qiankemeng/qiankemeng.github.io`
4. æ„å»ºè®¾ç½®ï¼š
   - **Build command**: `npm run build`
   - **Publish directory**: `out`
5. ç‚¹å‡» **Deploy site**

#### 3. å¯ç”¨ Git Gateway

1. åœ¨ Netlify æ§åˆ¶å°ï¼Œè¿›å…¥ä½ çš„ç«™ç‚¹
2. **Settings** â†’ **Identity** â†’ **Enable Identity**
3. å‘ä¸‹æ»šåŠ¨åˆ° **Services** â†’ **Git Gateway** â†’ **Enable Git Gateway**

#### 4. è®¾ç½®æ³¨å†Œæ–¹å¼

1. **Identity** â†’ **Settings and usage**
2. **Registration** â†’ é€‰æ‹© **Invite only**ï¼ˆä»…é‚€è¯·ï¼‰
3. **External providers** â†’ å¯ç”¨ **GitHub**ï¼ˆå¯é€‰ï¼‰

#### 5. é‚€è¯·è‡ªå·±

1. **Identity** æ ‡ç­¾é¡µ
2. ç‚¹å‡» **Invite users**
3. è¾“å…¥ä½ çš„é‚®ç®±
4. æŸ¥æ”¶é‚®ä»¶å¹¶è®¾ç½®å¯†ç 

#### 6. æ›´æ–°é…ç½®æ–‡ä»¶

ç¡®ä¿ `public/admin/config.yml` ä½¿ç”¨ä»¥ä¸‹è®¾ç½®ï¼š

```yaml
backend:
  name: git-gateway
  branch: main
```

#### 7. æµ‹è¯•è®¿é—®

è®¿é—® `https://qiankemeng.github.io/admin/`ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚

---

## ğŸ”§ é…ç½®éªŒè¯

### æ£€æŸ¥ config.yml è¯­æ³•

ä½¿ç”¨åœ¨çº¿ YAML éªŒè¯å™¨æ£€æŸ¥è¯­æ³•ï¼šhttps://www.yamllint.com/

**å¸¸è§è¯­æ³•é”™è¯¯ï¼š**

âŒ é”™è¯¯ç¤ºä¾‹ï¼š
```yaml
fields:
- {label: "æ ‡é¢˜", name: "title"}  # ç¼ºå°‘ widget
```

âœ… æ­£ç¡®ç¤ºä¾‹ï¼š
```yaml
fields:
  - {label: "æ ‡é¢˜", name: "title", widget: "string"}
```

### éªŒè¯å¿…éœ€å­—æ®µ

ç¡®ä¿ä»¥ä¸‹å­—æ®µå­˜åœ¨ï¼š

```yaml
backend:
  name: github  # æˆ– git-gateway æˆ– test-repo

collections:
  - name: "unique-name"
    label: "Display Name"
    folder: "path/to/posts"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Body", name: "body", widget: "markdown"}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1: "Config Error: Error loading config"

**åŸå› **ï¼šYAML è¯­æ³•é”™è¯¯

**è§£å†³**ï¼š
1. å¤åˆ¶ `config.yml` å†…å®¹
2. ç²˜è´´åˆ° https://www.yamllint.com/
3. ä¿®å¤æŠ¥å‘Šçš„è¯­æ³•é”™è¯¯
4. å¸¸è§é”™è¯¯ï¼š
   - Tab ç¼©è¿›ï¼ˆåº”ä½¿ç”¨ç©ºæ ¼ï¼‰
   - å¼•å·æœªé—­åˆ
   - å†’å·åç¼ºå°‘ç©ºæ ¼

### é—®é¢˜ 2: "Failed to load entries"

**åŸå› **ï¼šæ–‡ä»¶å¤¹è·¯å¾„ä¸å­˜åœ¨æˆ–æƒé™é—®é¢˜

**è§£å†³**ï¼š
```bash
# ç¡®ä¿æ‰€æœ‰åˆ†ç±»ç›®å½•å­˜åœ¨
mkdir -p src/content/blog/posts/{daily-papers,research,tutorials,notes,others}
touch src/content/blog/posts/*/.gitkeep
git add src/content/blog/posts/*/.gitkeep
git commit -m "Add blog category directories"
git push
```

### é—®é¢˜ 3: "Cannot read property 'get' of undefined"

**åŸå› **ï¼šCMS ç‰ˆæœ¬ä¸å…¼å®¹æˆ–é…ç½®æ ¼å¼é”™è¯¯

**è§£å†³**ï¼š
1. ä½¿ç”¨å›ºå®šç‰ˆæœ¬çš„ CDNï¼š
   ```html
   <script src="https://unpkg.com/decap-cms@3.1.11/dist/decap-cms.js"></script>
   ```
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°

### é—®é¢˜ 4: ç™»å½•åæç¤º "OAuth é”™è¯¯"

**åŸå› **ï¼šæœªé…ç½® Netlify Identity æˆ– GitHub OAuth App

**è§£å†³**ï¼š
- **é€‰é¡¹ 1**ï¼šæŒ‰ç…§æ–¹æ¡ˆ C é…ç½® Netlify
- **é€‰é¡¹ 2**ï¼šä½¿ç”¨æœ¬åœ°æ¨¡å¼æµ‹è¯•ï¼ˆæ–¹æ¡ˆ Bï¼‰

### é—®é¢˜ 5: ä¿å­˜æ–‡ç« åçœ‹ä¸åˆ°æ›´æ”¹

**åŸå› **ï¼šä½¿ç”¨ `test-repo` æ¨¡å¼æˆ–æœ¬åœ°æ¨¡å¼

**è¯´æ˜**ï¼š
- `test-repo` æ¨¡å¼ï¼šæ•°æ®ä»…ä¿å­˜åœ¨æµè§ˆå™¨ localStorageï¼Œä¸ä¼šæäº¤åˆ° GitHub
- `local` æ¨¡å¼ï¼šæ•°æ®ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **ç”Ÿäº§æ¨¡å¼**ï¼šéœ€è¦ä½¿ç”¨ `git-gateway` æˆ– `github` backend

---

## ğŸ“Š ä¸åŒæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|---------|
| **test-repo** | æ— éœ€é…ç½®ï¼Œç«‹å³å¯ç”¨ | æ•°æ®ä¸æŒä¹…åŒ– | å¿«é€Ÿæµ‹è¯•ç•Œé¢ |
| **local** | ç¼–è¾‘çœŸå®æ–‡ä»¶ | éœ€è¦è¿è¡Œæœ¬åœ°æœåŠ¡ | æœ¬åœ°å¼€å‘ |
| **git-gateway** (Netlify) | å®Œæ•´åŠŸèƒ½ï¼Œæ˜“é…ç½® | éœ€è¦ Netlify è´¦å· | ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰ |
| **github** | ç›´æ¥ GitHub è®¤è¯ | éœ€è¦é…ç½® OAuth App | ä¸æƒ³ç”¨ Netlify |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹å»ºè®®

### å¯¹äºæ–°æ‰‹

1. **ç¬¬ä¸€æ­¥**ï¼šä½¿ç”¨æ–¹æ¡ˆ Aï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰å¿«é€ŸæŸ¥çœ‹ CMS ç•Œé¢
2. **ç¬¬äºŒæ­¥**ï¼šä½¿ç”¨æ–¹æ¡ˆ Bï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰åœ¨æœ¬åœ°ç¯å¢ƒæµ‹è¯•å®Œæ•´åŠŸèƒ½
3. **ç¬¬ä¸‰æ­¥**ï¼šä½¿ç”¨æ–¹æ¡ˆ Cï¼ˆNetlifyï¼‰é…ç½®ç”Ÿäº§ç¯å¢ƒ

### å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…

ç›´æ¥è·³åˆ°æ–¹æ¡ˆ Cï¼Œé…ç½® Netlify æˆ–è‡ªå·±çš„ OAuth Appã€‚

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆéƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**ï¼šæŒ‰ F12 æŸ¥çœ‹å®Œæ•´é”™è¯¯ä¿¡æ¯
2. **æŸ¥çœ‹ Decap CMS æ–‡æ¡£**ï¼šhttps://decapcms.org/docs/intro/
3. **GitHub Issues**ï¼šhttps://github.com/decaporg/decap-cms/issues
4. **ç¤¾åŒºè®ºå›**ï¼šhttps://github.com/decaporg/decap-cms/discussions

---

## ğŸ”„ æ¢å¤åŸé…ç½®

å¦‚æœä½ ä½¿ç”¨äº†æµ‹è¯•é…ç½®ï¼Œæƒ³è¦æ¢å¤åŸé…ç½®ï¼š

```bash
cd public/admin
mv config.yml config-test.yml
mv config.yml.backup config.yml
```

---

## âœ… éªŒè¯æ¸…å•

ä½¿ç”¨æ­¤æ¸…å•ç¡®è®¤ä½ çš„é…ç½®æ­£ç¡®ï¼š

- [ ] èƒ½è®¿é—® `https://ä½ çš„åŸŸå/admin/`
- [ ] é¡µé¢ä¸æ˜¯ç©ºç™½ï¼ˆè‡³å°‘æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨æˆ–ç™»å½•ç•Œé¢ï¼‰
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ— çº¢è‰²é”™è¯¯
- [ ] `config.yml` è¯­æ³•æ­£ç¡®ï¼ˆç”¨ YAML éªŒè¯å™¨æ£€æŸ¥ï¼‰
- [ ] æ‰€æœ‰åšå®¢åˆ†ç±»ç›®å½•å­˜åœ¨
- [ ] ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰Netlify Identity å·²å¯ç”¨
- [ ] ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰Git Gateway å·²å¯ç”¨
- [ ] ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰å·²é‚€è¯·è‡ªå·±ä¸ºç”¨æˆ·

---

**æç¤º**ï¼šå¦‚æœä½ åªæ˜¯æƒ³å¿«é€Ÿæµ‹è¯• CMS ç•Œé¢ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨ **æ–¹æ¡ˆ Aï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰**ã€‚é…ç½®åªéœ€è¦ 30 ç§’ï¼Œæ— éœ€ä»»ä½•è®¤è¯è®¾ç½®ï¼
